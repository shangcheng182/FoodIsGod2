<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="css/foot.css">
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<title>菜品管理</title>
<style type="text/css">
.order-button{
height:60px;
margin-top:25px;
}
form{
	display:flex;
	flex-direction: column
}
.form-font{
	font-size:40px;
}
input{
	margin-left:100px;
	width:400px;
	height:80px;
    background: #f9f8f8;
	border:none;
	font-size:56px;
}
textarea{
	margin-left:100px;
	width:400px;
	height:400px;
	background: #f9f8f8;
	border:none;
	font-size:56px;
}
.dishes-detail-box{
	height:1120px;
}
</style>
</head>
<body>	
	<!-- 榜单 -->
	<div class="manager-order-dishes-nav" data-spy="scroll" data-target="#navbar-example">
		<div class="order-category" id="order-dishes">
			<!-- 菜品 -->

		</div>
	</div>
	
	<!-- 模态框 -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">							
		<div class="dishes-detail-box">	
			<div class="modal-header">
				<button type="button" class="close order-label" data-dismiss="modal" aria-hidden="true">×</button>
				<button class="order-dishes-img"><img alt="" src="images/上传.png" id="picture"></button>
				<span class="form-font " id="span">点击更改</span>
			</div>			
				<form action="manage-order.html">
					<span class="form-font text-center">名称</span><input id="name">
					<span class="form-font text-center">价格</span><input id="price">
					<span class="form-font text-center">描述</span>
					<textarea rows="10" cols="50" id="remark"></textarea>
				</form>
			<div class="modal-footer">
				<button type="submit" class="btn-block moder-join btn-lg moder-font" data-dismiss="modal">确认</button>
			</div>
		</div>			
	</div>
	<!-- 购物车 -->
	<div class="order-cart-box">	
		<a class="circle-button text-center" data-toggle="modal" data-target="#myModal" onclick="add()">添加</a>
	</div>
</body>

	<!-- 底部导航栏 -->
	
<footer>
	<nav class="navbar-fixed-bottom" role="navigation">
    <div class="container-fluid topic"style="background:#cbd7e3">
	    <div>
	    	<a href="manager-order.html" class="foot-a">
	        <img alt="点单" src="images/应用1.png" class="foot-img center-block">
	        <span class="text-center foot-span">管理</span>
	        </a>
	    </div>
	    <div>
	    	<a href="manager-po.html" class="foot-a">
	        <img alt="订单" src="images/订单.png" class="foot-img center-block">
	        <span class="text-center foot-span">订单</span>
	        </a>
	    </div>
	    <div>
	    	<a href="manager-my.html" class="foot-a">
	        <img alt="我的" src="images/我的.png" class="foot-img center-block">
	        <span class="text-center foot-span">我的</span>
	        </a>
	    </div>
	</div>	            	            	
</nav>
</footer>
<script>
	//修改
	function update(n){
		document.getElementById("name").value = allDish[n].mealsName;
		document.getElementById("price").value = allDish[n].mealsPrice;
		document.getElementById("remark").value = allDish[n].mealsRepresent;
		document.getElementById('picture').setAttribute('src', 'images/' + allDish[n].mealsPicture);
		$('#span').css("display",'block');
		$('#name').attr('disabled',false);
		$('#price').attr('disabled',false);
		$('#remark').attr('disabled',false);
	}
	//修改
	function del(n){
		document.getElementById("name").value = allDish[n].mealsName;
		document.getElementById("price").value = allDish[n].mealsPrice;
		document.getElementById("remark").value = allDish[n].mealsRepresent;
		document.getElementById('picture').setAttribute('src', 'images/' + allDish[n].mealsPicture);
		$('#span').css("display",'none');
		$('#name').attr('disabled','disabled');
		$('#price').attr('disabled','disabled');
		$('#remark').attr('disabled','disabled');
	}
	//添加
	function add(){
		$('span').css("display",'block');
		document.getElementById("span").innerHTML = "点击添加";
		document.getElementById('picture').setAttribute('src', 'images/上传.png');
	}
	//菜品
	var allDish = [{
		"mealsId": 1001,
		"sortId": 1,
		"mealsName": "牛肉1",
		"mealsPrice": 25,
		"mealsRepresent": "好吃美味牛肉",
		"mealsPicture": "我的.png",
		"mealsSales": 50
	}, {
		"mealsId": 1002,
		"sortId": 2,
		"mealsName": "果蔬2",
		"mealsPrice": 25,
		"mealsRepresent": "好吃美味果蔬",
		"mealsPicture": "首页.png",
		"mealsSales": 50
	}, {
		"mealsId": 1003,
		"sortId": 3,
		"mealsName": "果蔬3",
		"mealsPrice": 25,
		"mealsRepresent": "好吃美味果蔬",
		"mealsPicture": "首页.png",
		"mealsSales": 50
	}, {
		"mealsId": 1004,
		"sortId": 1,
		"mealsName": "果蔬fgggggg1",
		"mealsPrice": 25,
		"mealsRepresent": "好吃美味果蔬",
		"mealsPicture": "首页.png",
		"mealsSales": 50
	}, {
		"mealsId": 1005,
		"sortId": 2,
		"mealsName": "果蔬2",
		"mealsPrice": 25,
		"mealsRepresent": "好吃美味果蔬",
		"mealsPicture": "首页.png",
		"mealsSales": 50
	}, {
		"mealsId": 1006,
		"sortId": 3,
		"mealsName": "果蔬3",
		"mealsPrice": 25,
		"mealsRepresent": "好吃美味果蔬",
		"mealsPicture": "首页.png",
		"mealsSales": 50
	}];
	
	insertDish();
	function insertDish() {
		// 请求到的json渲染到页面上

		for (var i = 0; i < allDish.length; i++) {
			var target = document.getElementById("order-dishes");

			var temp = "<div class='order-dishes'"+allDish[i].mealsId+"><img alt='' src='images/" +allDish[i].mealsPicture+ 
			"' class='order-dishes-img'><div class='order-dishes-price'><label class='order-label'>" +allDish[i].mealsName+ 
			"</label><span class='dishes-price'>￥" +allDish[i].mealsPrice+ 
			".00</span></div><div class='manager-order-dishes-price'><button class='manager-order-button' data-toggle='modal' data-target='#myModal' onclick='del("+i+")'>删除</button><button class='manager-order-button' data-toggle='modal' data-target='#myModal' onclick='update("+i+")'>修改</button></div></div>";
			target.innerHTML += temp;
		}
		
	}
</script>
</html>